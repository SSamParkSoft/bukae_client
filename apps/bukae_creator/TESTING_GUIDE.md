# Step4 비디오 편집 기능 테스트 가이드

리팩토링된 step4 비디오 편집 기능을 테스트하기 위한 상세 가이드입니다.

## 목차

1. [빠른 시작](#빠른-시작)
2. [테스트 체크리스트](#테스트-체크리스트)
3. [상세 테스트 가이드](#상세-테스트-가이드)
4. [콘솔 로그 설명](#콘솔-로그-설명)
5. [문제 해결 가이드](#문제-해결-가이드)
6. [테스트 시나리오](#테스트-시나리오)

---

## 빠른 시작

### 테스트 전 준비사항

1. **개발 서버 실행**
   ```bash
   pnpm dev
   ```

2. **브라우저 개발자 도구 열기**
   - F12 또는 Cmd+Option+I (Mac) / Ctrl+Shift+I (Windows)
   - Console 탭 열기

3. **필수 설정 확인**
   - 목소리 템플릿 선택됨
   - 최소 1개 이상의 씬 존재
   - 각 씬에 이미지와 스크립트 설정됨

### 테스트 순서 권장

1. 기본 재생 기능 → 2. 씬 선택 → 3. 구간 선택 → 4. TTS 미리듣기 → 5. 전환 효과

---

## 테스트 체크리스트

### 기본 기능

- [ ] [기본 재생 기능](#1-기본-재생-기능)
- [ ] [씬 선택 기능](#2-씬-선택-기능)
- [ ] [구간 선택 기능](#3-구간-선택-기능)
- [ ] [그룹 컨테이너 기능](#4-그룹-컨테이너-기능)
- [ ] [TTS 미리듣기](#5-tts-미리듣기)
- [ ] [전환 효과](#6-전환-효과)

### 고급 기능

- [ ] [에러 처리](#7-에러-처리)
- [ ] [상태 동기화](#8-상태-동기화)

---

## 상세 테스트 가이드

### 1. 기본 재생 기능

**목적**: 메인 재생 버튼을 통한 전체 비디오 재생이 정상 작동하는지 확인

**전제 조건**:
- 목소리 템플릿 선택됨
- 최소 1개 이상의 씬 존재
- 각 씬에 스크립트 입력됨

**단계별 테스트**:

1. **재생 시작**
   - 메인 재생 버튼(화면 상단 중앙) 클릭
   - "재생 준비 중..." 로딩 표시 확인
   - TTS 합성 진행 상태 확인 (부트스트래핑 표시)

2. **재생 중 확인**
   - 캔버스에 첫 번째 씬 이미지 표시
   - 자막이 순차적으로 표시됨
   - TTS 오디오 재생됨
   - BGM이 설정되어 있으면 BGM 재생됨
   - 재생바가 진행됨

3. **일시정지**
   - 재생 중 일시정지 버튼이 표시되는지 확인
   - 재생 중 일시정지 버튼 클릭
   - 재생이 즉시 중지되는지 확인
   - TTS 오디오 정지 확인
   - BGM 오디오 정지 확인
   - 재생바가 멈추는지 확인

**예상 결과**:
- 재생 버튼 클릭 시 즉시 로딩 시작
- 모든 씬의 TTS 합성 완료 후 자동 재생 시작
- **첫 번째 구간의 TTS가 실제로 재생되기 시작한 후 씬 전환됨 (타이밍 동기화)**
- **BGM과 TTS가 동시에 시작됨**
- **BGM 볼륨이 적절한 수준(0.3)으로 재생됨**
- 각 씬이 순차적으로 재생됨
- 자막이 구간별로 표시됨
- **재생바가 실시간으로 순차적으로 업데이트됨**
- **일시정지 버튼이 재생 중에 표시됨**

**콘솔 로그 확인**:
```
[TTS] 씬 0 합성 필요: 0/2개 구간 캐시됨
[TTS] 씬 0 TTS 생성 시작: 2개 구간
[자막 리스트] 씬 0 원본 텍스트: ...
[자막 리스트] 씬 0 분할된 자막 개수: 2
[재생] 씬 0 구간 1/2 처리 시작 ...
[재생] 씬 0 구간 1/2 자막 렌더링 ...
```

**실패 시 확인**:
- 콘솔에 에러 메시지 확인
- 목소리 템플릿이 선택되었는지 확인
- 네트워크 탭에서 TTS API 호출 확인
- `useVideoPlayback` 훅의 `isPreparing` 상태 확인

---

### 2. 씬 선택 기능

**목적**: 씬 리스트에서 씬을 클릭했을 때 올바르게 전환되는지 확인

**전제 조건**:
- 최소 2개 이상의 씬 존재
- 각 씬에 이미지와 스크립트 설정됨

**단계별 테스트**:

1. **기본 씬 선택**
   - 씬 리스트에서 두 번째 씬 클릭
   - 캔버스에 해당 씬 이미지 표시 확인
   - 자막이 해당 씬의 스크립트로 변경 확인

2. **재생 중 씬 선택**
   - 재생 중인 상태에서 다른 씬 클릭
   - **재생이 즉시 중지되는지 확인 (바로 정지)**
   - **TTS 오디오가 즉시 정지되는지 확인**
   - 선택한 씬으로 이동하는지 확인

3. **전환 효과 확인**
   - 다른 씬 클릭 시 전환 효과 적용 확인
   - **전환 효과 시작 전 이전 씬이 먼저 숨겨지는지 확인 (겹침 없음)**
   - 같은 씬 다시 클릭 시 페이드 인 효과 확인

**예상 결과**:
- 씬 클릭 시 즉시 해당 씬으로 전환
- 전환 효과가 부드럽게 적용됨
- 재생 중 씬 선택 시 재생 중지

**콘솔 로그 확인**:
```
[handleSceneSelect] updateCurrentScene 호출
```

**실패 시 확인**:
- `useSceneNavigation` 훅의 `selectScene` 함수 확인
- `updateCurrentScene` 함수 호출 확인
- 전환 효과 타입이 올바르게 설정되었는지 확인

---

### 3. 구간 선택 기능

**목적**: `|||` 구분자가 있는 씬에서 특정 구간을 선택했을 때 올바르게 동작하는지 확인

**전제 조건**:
- 최소 1개 이상의 씬에 `|||` 구분자로 구간이 나뉨
- 예: "첫 번째 구간 ||| 두 번째 구간 ||| 세 번째 구간"

**단계별 테스트**:

1. **같은 씬 내 구간 선택**
   - 구간이 나뉜 씬에서 첫 번째 구간 클릭
   - 자막이 첫 번째 구간 텍스트로 변경 확인
   - 이미지는 그대로 유지 확인
   - 전환 효과 없음 확인

2. **다른 구간 선택**
   - 같은 씬의 두 번째 구간 클릭
   - **자막이 두 번째 구간 텍스트로 변경되는지 확인**
   - 자막만 변경되고 전환 효과 없음 확인
   - 이미지는 그대로 유지 확인

3. **다른 씬의 구간 선택**
   - 다른 씬의 구간 클릭
   - **씬이 전환되는지 확인**
   - **해당 구간의 텍스트가 표시되는지 확인 (전체 텍스트가 아닌 구간 텍스트만)**
   - 전환 효과 적용 확인

**예상 결과**:
- 같은 씬 내 구간 선택 시 자막만 변경
- 다른 씬 구간 선택 시 씬 전환 + 구간 표시
- 전환 효과가 적절히 적용됨

**콘솔 로그 확인**:
```
[구간 선택] 같은 씬 내 구간 전환: 씬 0, 구간 1, 텍스트: "..."
[구간 선택] 다른 씬으로 이동: 씬 1, 구간 0, 텍스트: "..."
updateCurrentScene 호출
```

**수정 사항 확인**:
- 같은 씬 내 구간 전환 시 자막이 확실히 변경됨
- 다른 씬 구간 선택 시 씬 전환과 구간 텍스트 표시가 모두 정상 작동

**실패 시 확인**:
- `useSceneNavigation` 훅의 `selectPart` 함수 확인
- `textsRef`에 텍스트 객체가 올바르게 저장되었는지 확인
- `currentSceneIndexRef` 값 확인

---

### 4. 그룹 컨테이너 기능

**목적**: 같은 `sceneId`를 가진 씬들이 그룹으로 묶여 있을 때 올바르게 동작하는지 확인

**전제 조건**:
- 최소 2개 이상의 씬이 같은 `sceneId`를 가짐
- 그룹 컨테이너가 화면에 표시됨

**단계별 테스트**:

1. **그룹 컨테이너 클릭**
   - 그룹 컨테이너의 빈 공간(패딩 영역) 클릭
   - **그룹의 첫 번째 씬의 첫 번째 구간만 표시되는지 확인**
   - **구간이 나뉘어져 있으면 첫 번째 구간 텍스트만 표시, 전체 텍스트가 아닌지 확인**

2. **그룹 내 씬 전환**
   - 그룹 내 첫 번째 씬 재생 중
   - 자동으로 두 번째 씬으로 전환되는지 확인
   - **자막만 변경되고 전환 효과 없음 확인 (전환 효과 'none' 적용)**
   - **두 번째 씬의 첫 번째 구간 텍스트만 표시되는지 확인**

3. **그룹 간 전환**
   - 다른 그룹의 씬으로 전환
   - 전환 효과가 적용되는지 확인

**예상 결과**:
- 그룹 컨테이너 클릭 시 첫 번째 씬 선택
- 그룹 내 씬 전환 시 자막만 변경
- 그룹 간 전환 시 전환 효과 적용

**콘솔 로그 확인**:
```
[handleSceneSelect] autoAdvanceToNextInGroup 호출: currentIdx=0
[handleSceneSelect] 다음 씬 확인: nextScene=true, isNextInSameGroup=true
[handleSceneSelect] updateCurrentScene 완료, 다음 씬으로 재귀 호출
```

**실패 시 확인**:
- 씬들의 `sceneId`가 올바르게 설정되었는지 확인
- `isNextInSameGroup` 로직 확인
- `autoAdvanceToNextInGroup` 함수 호출 확인

---

### 5. TTS 미리듣기

**목적**: 씬별 또는 구간별 TTS 미리듣기가 정상 작동하는지 확인

**전제 조건**:
- 목소리 템플릿 선택됨
- 최소 1개 이상의 씬에 스크립트 입력됨

**단계별 테스트**:

1. **전체 씬 TTS 미리듣기**
   - 씬 리스트에서 씬의 재생 버튼 클릭
   - 전체 씬의 TTS가 순차적으로 재생되는지 확인
   - **자막이 각 구간별로 순차적으로 업데이트되는지 확인**
   - **각 구간 재생 시 해당 구간의 텍스트만 표시되는지 확인**

2. **구간별 TTS 미리듣기**
   - 구간이 나뉜 씬에서 특정 구간의 재생 버튼 클릭
   - 해당 구간만 TTS 재생되는지 확인
   - **자막이 해당 구간의 텍스트만 표시되는지 확인 (다른 구간 텍스트가 섞이지 않음)**
   - **일시정지 버튼이 정상적으로 작동하는지 확인**

3. **미리듣기 중지**
   - 미리듣기 중 정지 버튼(일시정지 버튼) 클릭
   - **오디오가 즉시 중지되는지 확인**
   - **일시정지 버튼이 정상적으로 작동하는지 확인**
   - **같은 씬/구간을 다시 클릭하면 재생이 시작되는지 확인**

**예상 결과**:
- 재생 버튼 클릭 시 즉시 TTS 재생 시작
- 자막이 TTS와 동기화되어 표시됨
- 정지 버튼으로 즉시 중지 가능

**콘솔 로그 확인**:
```
[씬 미리보기] 씬 0 구간 1 저장소 URL 사용: ...
[씬 미리보기] 씬 0 구간 1 자막 업데이트: "..."
[씬 미리보기] 씬 0 구간 2 자막 업데이트: "..."
```

**수정 사항 확인**:
- 각 구간 재생 시 자막이 해당 구간 텍스트로 업데이트됨
- 일시정지 버튼이 정상적으로 작동함

**실패 시 확인**:
- `handleSceneTtsPreview` 함수 확인
- TTS 캐시에 데이터가 있는지 확인
- `stopScenePreviewAudio` 함수 호출 확인

---

### 6. 전환 효과

**목적**: 씬 전환 시 설정한 전환 효과가 올바르게 적용되는지 확인

**전제 조건**:
- 최소 2개 이상의 씬 존재
- 각 씬에 전환 효과 설정됨 (fade, slide, zoom 등)

**단계별 테스트**:

1. **기본 전환 효과**
   - 다른 씬 클릭
   - **전환 효과 시작 전 이전 씬이 먼저 숨겨지는지 확인 (겹침 없음)**
   - 설정한 전환 효과가 적용되는지 확인
   - 효과가 부드럽게 진행되는지 확인
   - **자막이 올바르게 표시되는지 확인 (구간이 나뉘어져 있으면 첫 번째 구간만 표시)**

2. **같은 그룹 내 전환**
   - 같은 그룹 내 씬 전환
   - **전환 효과 없이 자막만 변경되는지 확인 (전환 효과 'none' 적용)**
   - **각 씬의 첫 번째 구간 텍스트만 표시되는지 확인 (전체 텍스트가 아닌)**

3. **재생 중 자동 전환**
   - 재생 중 다음 씬으로 자동 전환
   - 전환 효과가 적용되는지 확인

**예상 결과**:
- 다른 그룹 씬 전환 시 전환 효과 적용
- 같은 그룹 씬 전환 시 전환 효과 없음
- 효과가 부드럽게 진행됨

**콘솔 로그 확인**:
```
(전환 효과는 시각적이므로 특별한 로그 없음)
updateCurrentScene 호출 (전환 효과 적용)
```

**실패 시 확인**:
- `usePixiEffects` 훅의 `applyEnterEffect` 함수 확인
- 전환 효과 타입이 올바르게 전달되는지 확인
- GSAP 애니메이션이 정상 작동하는지 확인

---

### 7. 에러 처리

**목적**: 에러 상황에서 적절한 에러 처리가 되는지 확인

**전제 조건**:
- 다양한 에러 상황 시뮬레이션

**단계별 테스트**:

1. **목소리 미선택 시 재생**
   - 목소리 템플릿을 선택하지 않은 상태
   - 재생 버튼 클릭
   - "목소리를 선택해주세요." 경고 메시지 표시 확인

2. **TTS 합성 실패**
   - 네트워크 오류 시뮬레이션
   - 재생 버튼 클릭
   - 적절한 에러 메시지 표시 확인

3. **BGM 로드 실패**
   - 잘못된 BGM URL 설정
   - 재생 버튼 클릭
   - BGM 없이 재생 진행되는지 확인

**예상 결과**:
- 에러 발생 시 사용자에게 명확한 메시지 표시
- 치명적이지 않은 에러는 재생 계속 진행
- 콘솔에 상세한 에러 로그 출력

**콘솔 로그 확인**:
```
[재생] 목소리를 선택해주세요.
[재생] 씬 0 구간 1 TTS 생성 실패: ...
[TTS] 구간 1 업로드 실패: ...
```

**실패 시 확인**:
- `useVideoPlayback` 훅의 에러 처리 로직 확인
- try-catch 블록이 적절히 사용되었는지 확인
- 사용자에게 표시되는 에러 메시지 확인

---

### 8. 상태 동기화

**목적**: 여러 훅 간 상태가 올바르게 동기화되는지 확인

**전제 조건**:
- 재생 기능이 정상 작동함

**단계별 테스트**:

1. **재생 상태 동기화**
   - 재생 버튼 클릭
   - `useVideoPlayback`의 `isPlaying` 상태 확인
   - `useTimelinePlayer`의 `isPlaying` 상태 확인
   - 두 상태가 동일한지 확인

2. **씬 인덱스 동기화**
   - 씬 선택
   - `currentSceneIndex` 상태 확인
   - `currentSceneIndexRef` 값 확인
   - 두 값이 동일한지 확인

3. **재생바 동기화**
   - 재생 중 재생바 확인
   - **재생바가 실시간으로 순차적으로 업데이트되는지 확인 (씬 전환 시점뿐만 아니라 TTS 재생 중에도 업데이트)**
   - 재생바가 올바른 위치에 있는지 확인
   - 씬 전환 시 재생바 업데이트 확인

**예상 결과**:
- 모든 상태가 일관되게 유지됨
- 상태 변경 시 즉시 UI 업데이트
- ref와 state가 동기화됨

**콘솔 로그 확인**:
```
(상태 동기화는 내부적으로 처리되므로 특별한 로그 없음)
```

**실패 시 확인**:
- `useEffect` 훅의 의존성 배열 확인
- 상태 업데이트 로직 확인
- ref와 state 간 동기화 로직 확인

---

## 콘솔 로그 설명

리팩토링된 코드에서 출력하는 주요 로그 패턴과 의미:

### 자막 리스트 로그

```
[자막 리스트] 씬 0 원본 텍스트: ...
[자막 리스트] 씬 0 분할된 자막 개수: 2
[자막 리스트] 씬 0 자막 배열: [...]
[자막 리스트] 씬 0 구간 1: 첫 번째 구간
```

**의미**: 씬의 스크립트가 `|||` 구분자로 분할되어 처리됨

**확인 시점**: 재생 시작 시, 구간 선택 시

---

### 재생 로그

```
[재생] 씬 0 구간 1/2 처리 시작 (리스트 인덱스: 0)
[재생] 씬 0 구간 1/2 자막 렌더링 (리스트 인덱스 0): "..."
[재생] 씬 0 구간 1 캐시에서 사용
[재생] 씬 0 구간 1 저장소 URL 사용: ...
[재생] 씬 0 구간 1 완료, 다음 구간 2로 이동
```

**의미**: 각 구간별 재생 진행 상황

**확인 시점**: 재생 중

---

### TTS 로그

```
[TTS] 씬 0 합성 필요: 0/2개 구간 캐시됨
[TTS] 씬 0 TTS 생성 시작: 2개 구간
[TTS] 씬 0 구간 1 처리 중...
[TTS] 구간 1 캐시 확인: blob=true, url=false
[TTS] 구간 1 업로드 완료: ...
[TTS] 씬 0 TTS 생성 완료: 2개 구간, 총 duration: 5.23초
```

**의미**: TTS 합성 및 캐싱 진행 상황

**확인 시점**: 재생 준비 중, TTS 미리듣기 시

---

### 씬 선택 로그

```
[handleSceneSelect] autoAdvanceToNextInGroup 호출: currentIdx=0
[handleSceneSelect] 다음 씬 확인: nextScene=true, isNextInSameGroup=true
[handleSceneSelect] TTS 캐시 사용: duration=2.5, waitTime=2500
[handleSceneSelect] setTimeout 실행: currentIdx=0 -> nextIndex=1
[handleSceneSelect] updateCurrentScene 완료, 다음 씬으로 재귀 호출
```

**의미**: 씬 선택 및 자동 전환 로직

**확인 시점**: 씬 선택 시, 그룹 내 자동 전환 시

---

### 씬 미리보기 로그

```
[씬 미리보기] 씬 0 구간 1 저장소 URL 사용: ...
[씬 미리보기] 씬 0 구간 1 자막 업데이트: "..."
[씬 미리보기] 씬 0 구간 1 재생 시작 실패: ...
```

**의미**: TTS 미리듣기 진행 상황

**확인 시점**: TTS 미리듣기 시

---

### 에러 로그

```
[재생] 목소리를 선택해주세요.
[재생] 로그인이 필요합니다.
[재생] 씬 0 구간 1 TTS 생성 실패: ...
[TTS] 구간 1 업로드 실패: ...
```

**의미**: 에러 발생 상황

**확인 시점**: 에러 발생 시

---

## 문제 해결 가이드

### useVideoPlayback 훅 관련 문제

**증상**: 재생이 시작되지 않음

**확인 사항**:
1. `isPreparing` 상태가 `true`에서 `false`로 변경되는지 확인
2. `voiceTemplate`이 설정되었는지 확인
3. `pixiReady`가 `true`인지 확인
4. `spritesRef`에 스프라이트가 로드되었는지 확인
5. 콘솔에 TTS 합성 로그가 출력되는지 확인

**해결 방법**:
- 목소리 템플릿 선택 확인
- 씬 이미지가 로드되었는지 확인
- 네트워크 연결 확인
- 브라우저 콘솔의 에러 메시지 확인

---

**증상**: TTS가 재생되지 않음

**확인 사항**:
1. `ttsCacheRef`에 캐시가 있는지 확인
2. `ttsAudioRef.current`가 설정되었는지 확인
3. 오디오 URL이 유효한지 확인
4. 브라우저 오디오 정책 확인 (자동 재생 차단)

**해결 방법**:
- 브라우저에서 오디오 자동 재생 허용 설정
- TTS 캐시 초기화 후 재시도
- 네트워크 탭에서 오디오 파일 다운로드 확인

---

### useSceneNavigation 훅 관련 문제

**증상**: 씬 선택이 작동하지 않음

**확인 사항**:
1. `selectScene` 함수가 호출되는지 확인
2. `updateCurrentScene` 함수가 호출되는지 확인
3. `currentSceneIndex` 상태가 업데이트되는지 확인
4. `lastRenderedSceneIndexRef` 값 확인

**해결 방법**:
- 콘솔에 `[handleSceneSelect]` 로그가 출력되는지 확인
- `updateCurrentScene` 함수의 파라미터 확인
- 전환 효과 타입이 올바른지 확인

---

**증상**: 구간 선택이 작동하지 않음

**확인 사항**:
1. `selectPart` 함수가 호출되는지 확인
2. `textsRef`에 텍스트 객체가 있는지 확인
3. `currentSceneIndexRef` 값 확인
4. 스크립트에 `|||` 구분자가 있는지 확인

**해결 방법**:
- 스크립트에 `|||` 구분자 확인
- `textsRef.current.size` 확인
- `loadAllScenes` 호출 후 재시도

---

### 페이지 통합 관련 문제

**증상**: 상태가 동기화되지 않음

**확인 사항**:
1. `useVideoPlayback`과 `useTimelinePlayer`의 `isPlaying` 상태 확인
2. `currentSceneIndex` 상태 확인
3. `useEffect` 훅의 의존성 배열 확인

**해결 방법**:
- 상태 동기화 `useEffect` 훅 확인
- ref와 state 간 동기화 로직 확인
- React DevTools로 상태 변화 추적

---

**증상**: 재생 중 씬이 자동 전환되지 않음

**확인 사항**:
1. `useTimelinePlayer`의 `onSceneChange` 콜백 확인
2. `selectSceneRef.current`가 설정되었는지 확인
3. `currentTime`이 올바르게 업데이트되는지 확인

**해결 방법**:
- `selectSceneRef` 업데이트 `useEffect` 확인
- `useTimelinePlayer`의 `onSceneChange` 파라미터 확인
- 타임라인 duration 계산 확인

---

## 테스트 시나리오

### 시나리오 1: 기본 재생 플로우

1. **준비**
   - 목소리 템플릿 선택
   - 최소 3개 이상의 씬 생성
   - 각 씬에 이미지와 스크립트 설정

2. **실행**
   - 메인 재생 버튼 클릭
   - TTS 합성 완료 대기
   - 재생 시작 확인

3. **확인**
   - 첫 번째 씬부터 순차 재생
   - 자막이 구간별로 표시
   - 각 씬이 자동 전환
   - 재생바 진행 확인

4. **종료**
   - 일시정지 버튼 클릭
   - 재생 중지 확인

---

### 시나리오 2: 씬 전환 플로우

1. **준비**
   - 최소 3개 이상의 씬 생성
   - 각 씬에 다른 전환 효과 설정

2. **실행**
   - 첫 번째 씬 선택
   - 두 번째 씬 클릭
   - 세 번째 씬 클릭

3. **확인**
   - 각 씬 전환 시 효과 적용
   - 자막이 올바르게 표시
   - 이미지가 올바르게 표시

---

### 시나리오 3: 구간 선택 플로우

1. **준비**
   - 최소 1개 씬에 `|||` 구분자로 구간 나눔
   - 예: "첫 구간 ||| 두 구간 ||| 세 구간"

2. **실행**
   - 첫 번째 구간 클릭
   - 두 번째 구간 클릭
   - 세 번째 구간 클릭

3. **확인**
   - 각 구간 클릭 시 자막만 변경
   - 이미지는 그대로 유지
   - 전환 효과 없음

---

### 시나리오 4: 에러 케이스 플로우

1. **준비**
   - 목소리 템플릿 선택 해제

2. **실행**
   - 재생 버튼 클릭

3. **확인**
   - "목소리를 선택해주세요." 경고 표시
   - 재생이 시작되지 않음

---

## 추가 팁

### 테스트 효율성 향상

1. **캐시 활용**: 한 번 TTS를 합성하면 캐시에 저장되므로, 같은 스크립트로 재테스트 시 빠르게 진행됨

2. **콘솔 필터링**: 브라우저 콘솔에서 `[재생]`, `[TTS]` 등으로 필터링하여 관련 로그만 확인

3. **네트워크 탭 모니터링**: TTS API 호출과 오디오 파일 다운로드를 네트워크 탭에서 확인

4. **React DevTools**: 컴포넌트 상태와 props를 React DevTools로 확인

### 주의사항

- 첫 재생 시 TTS 합성 시간이 걸릴 수 있음 (네트워크 상태에 따라)
- 캐시된 TTS는 즉시 재생됨
- 같은 그룹 내 씬 전환은 자막만 변경되고 전환 효과 없음
- 브라우저 오디오 정책으로 인해 자동 재생이 차단될 수 있음

---

## 문제 보고 시 포함할 정보

문제가 발생했을 때 다음 정보를 포함하여 보고하세요:

1. **증상**: 무엇이 작동하지 않는지
2. **재현 단계**: 문제를 재현하는 단계
3. **예상 동작**: 정상 동작 시 기대되는 것
4. **실제 동작**: 실제로 발생한 것
5. **콘솔 로그**: 브라우저 콘솔의 관련 로그
6. **에러 메시지**: 에러 메시지가 있다면 전체 내용
7. **환경**: 브라우저, OS, 네트워크 상태

---

**마지막 업데이트**: 버그 수정 완료 후 (2024년 수정사항 반영)

## 수정 사항 요약

### 주요 수정 내용

1. **재생 시작 타이밍 동기화**
   - 첫 번째 구간의 TTS가 실제로 재생되기 시작한 후 씬 전환
   - BGM과 TTS 시작 시점 동기화
   - BGM 볼륨 0.3으로 조절

2. **재생바 실시간 업데이트**
   - TTS 재생 중 100ms마다 재생바 업데이트
   - 씬 전환 시점뿐만 아니라 재생 중에도 순차적으로 업데이트

3. **일시정지 버튼 표시**
   - `isPlaying` 상태 동기화로 일시정지 버튼 정상 표시

4. **재생 중 씬 선택 즉시 정지**
   - 재생 중 씬 클릭 시 즉시 정지 (isPlayingRef 업데이트)

5. **전환 효과 겹침 문제 해결**
   - 전환 효과 시작 전 이전 씬을 먼저 숨김

6. **구간 선택 기능 개선**
   - 같은 씬 내 구간 전환 시 자막 확실히 변경
   - 다른 씬 구간 선택 시 씬 전환 및 구간 텍스트 표시

7. **그룹 컨테이너 기능 개선**
   - 빈 공간 클릭 시 첫 구간만 표시
   - 그룹 내 씬 전환 시 전환 효과 없음 (자막만 변경)

8. **TTS 미리듣기 기능 개선**
   - 일시정지 기능 추가
   - 구간별 자막 표시 개선

9. **전환 효과 시 자막 표시 개선**
   - 구간이 나뉘어져 있으면 첫 번째 구간만 표시
   - 효과 패널에서 전환 효과 선택 시에도 첫 구간만 표시

10. **자막씬분할 시 속성 유지**
    - 씬 분할 시 기존 씬의 크기 조정 등 속성 유지

